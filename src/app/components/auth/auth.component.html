<div class="auth-container fade-in">
  
  <div class="form-side">
    <div class="form-wrapper">
      
      <div class="brand-header">
        <div class="logo-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg>
        </div>
        <h1>ClÃ­nica Monteluz</h1>
      </div>

      <div class="text-header">
        <h2>{{ authMode() === 'login' ? 'Bienvenido de nuevo' : 'Crear cuenta nueva' }}</h2>
        <p>{{ authMode() === 'login' ? 'Ingresa tus credenciales para acceder.' : 'Ãšnete a nosotros para gestionar tu salud.' }}</p>
      </div>

      <form [formGroup]="authForm" (ngSubmit)="handleAuth()" class="modern-form">
        
        <div class="role-switch-container" *ngIf="authMode() === 'register'">
          <div class="role-switch">
            <button type="button" [class.active]="role() === 'patient'" (click)="role.set('patient')">
              Paciente
            </button>
            <button type="button" [class.active]="role() === 'doctor'" (click)="role.set('doctor')">
              Personal MÃ©dico
            </button>
          </div>
        </div>

        <ng-container *ngIf="authMode() === 'register'">
          <div class="input-group">
            <label>Nombre Completo</label>
            <div class="input-wrapper">
              <span class="icon">ğŸ‘¤</span>
              <input type="text" formControlName="fullName" placeholder="Ej: Juan PÃ©rez">
            </div>
          </div>
        </ng-container>

        <div class="input-group">
          <label>Correo ElectrÃ³nico</label>
          <div class="input-wrapper">
            <span class="icon">âœ‰ï¸</span>
            <input type="email" formControlName="email" placeholder="nombre@correo.com">
          </div>
        </div>

        <div class="input-group">
          <label>ContraseÃ±a</label>
          <div class="input-wrapper">
            <span class="icon">ğŸ”’</span>
            <input type="password" formControlName="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          </div>
        </div>

        <ng-container *ngIf="authMode() === 'register' && role() === 'doctor'">
          <div class="doctor-fields animate-slide-down">
            <div class="input-group">
              <label>Especialidad</label>
              <div class="input-wrapper">
                <span class="icon">ğŸ©º</span>
                <select formControlName="specialty_id">
                  <option [ngValue]="null" disabled>Selecciona...</option>
                  <option *ngFor="let spec of dataService.specialties()" [value]="spec.id">{{ spec.name }}</option>
                </select>
              </div>
            </div>
            <div class="input-group">
              <label>NÂ° Licencia (CMP)</label>
              <div class="input-wrapper">
                <span class="icon">ğŸ†”</span>
                <input type="text" formControlName="license_number" placeholder="Ej: 123456">
              </div>
            </div>
          </div>
        </ng-container>

        <button type="submit" class="submit-btn" [disabled]="loading() || authForm.invalid">
          {{ loading() ? 'Procesando...' : (authMode() === 'login' ? 'Iniciar SesiÃ³n' : 'Registrarse') }}
        </button>

      </form>

      <div class="auth-footer">
        <p *ngIf="authMode() === 'login'">
          Â¿No tienes cuenta? <a (click)="toggleMode('register')">RegÃ­strate gratis</a>
        </p>
        <p *ngIf="authMode() === 'register'">
          Â¿Ya tienes cuenta? <a (click)="toggleMode('login')">Inicia sesiÃ³n</a>
        </p>
      </div>

    </div>
  </div>

  <div class="image-side">
    <div class="overlay">
      <div class="quote-box">
        <h3>"La medicina es el acto mÃ¡s humano de todos."</h3>
        <p>Gestiona tus citas y pacientes con la tecnologÃ­a de Monteluz.</p>
      </div>
    </div>
  </div>

</div>