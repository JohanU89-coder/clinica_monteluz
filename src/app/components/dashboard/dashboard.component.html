<div class="dashboard-layout">
  
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg>
      </div>
      <span class="logo-text">Monteluz</span>
    </div>

    <nav class="sidebar-nav">
      
      <button *ngIf="userRole() === 'patient'" 
              class="nav-item" 
              [class.active]="currentView() === 'book'" 
              (click)="setView('book')">
        <span class="icon">ğŸ“…</span>
        <span class="label">Agendar Cita</span>
      </button>

      <button class="nav-item" 
              [class.active]="currentView() === 'upcoming'" 
              (click)="setView('upcoming')">
        <span class="icon">âš¡</span>
        <span class="label">{{ userRole() === 'doctor' ? 'Mi Agenda' : 'PrÃ³ximas Citas' }}</span>
      </button>

      <button class="nav-item" 
              [class.active]="currentView() === 'history'" 
              (click)="setView('history')">
        <span class="icon">ğŸ“</span>
        <span class="label">Historial</span>
      </button>

      <button *ngIf="userRole() === 'patient'" 
              class="nav-item" 
              [class.active]="currentView() === 'family'" 
              (click)="setView('family')">
        <span class="icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</span>
        <span class="label">Mi Familia</span>
      </button>

      <button *ngIf="userRole() === 'doctor'" 
              class="nav-item" 
              [class.active]="currentView() === 'office'" 
              (click)="setView('office')">
        <span class="icon">ğŸ¥</span>
        <span class="label">Mi Consultorio</span>
      </button>
    </nav>

    <div class="user-profile-section">
      <div class="profile-card" (click)="setView('profile')" title="Ver mi perfil">
        <div class="avatar-mini" [style.background-color]="getAvatarColor(userProfile()?.full_name)">
          {{ getInitials(userProfile()?.full_name) }}
        </div>
        <div class="info">
          <p class="name">{{ userProfile()?.full_name }}</p>
          <p class="role">{{ userRole() === 'doctor' ? 'Doctor' : 'Paciente' }}</p>
        </div>
      </div>
      
      <button class="logout-btn" (click)="logout()" title="Cerrar SesiÃ³n">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
      </button>
    </div>
  </aside>

  <main class="main-content">
    <ng-container [ngSwitch]="currentView()">
      <app-appointment-list *ngSwitchCase="'upcoming'" [listType]="'upcoming'"></app-appointment-list>
      <app-appointment-list *ngSwitchCase="'history'" [listType]="'past'"></app-appointment-list>
      <app-book-appointment *ngSwitchCase="'book'"></app-book-appointment>
      <app-family *ngSwitchCase="'family'"></app-family>
      <app-doctor-office *ngSwitchCase="'office'"></app-doctor-office>
      <app-profile *ngSwitchCase="'profile'"></app-profile>
      <app-appointment-list *ngSwitchDefault [listType]="'upcoming'"></app-appointment-list>
    </ng-container>
  </main>
</div>